version: '3.9'

services:
  pulsar:
    image: apachepulsar/pulsar:2.8.3
    container_name: pulsar
    privileged: true
    user: root
    ports:
      - "6650:6650"
    volumes:
      - {{ param_docker_data }}/{{ param_role_name }}/conf/service/:/pulsar/conf/
      - {{ param_docker_data }}/{{ param_role_name }}/data/service/:/pulsar/data/
    command: bin/pulsar standalone
    restart: always

  pulsar_manager:
    image: apachepulsar/pulsar-manager:v0.2.0
    container_name: pulsar_manager
    privileged: true
    user: root
    restart: always
    volumes:
      - {{ param_docker_data }}/{{ param_role_name }}/conf/manager/application.properties:/pulsar-manager/pulsar-manager/application.properties
    environment:
      SPRING_CONFIGURATION_FILE: /pulsar-manager/pulsar-manager/application.properties

networks:
  default:
    external:
      name: local
