version: '3.9'

services:

  nexus:
    image: sonatype/nexus3
    container_name: nexus
    privileged: true
    user: root
    volumes:
      - {{ param_docker_data }}/{{ param_role_name }}/data/:/nexus-data/
    environment:
      TZ: Asia/Shanghai
      INSTALL4J_ADD_VM_PARAMS: -Xms2g -Xmx2g -XX:MaxDirectMemorySize=2g
    restart: always
    deploy:
      resources:
        limits:
          memory: 4G
        reservations:
          memory: 256M

networks:
  default:
    external:
      name: local
