version: '3.9'

services:

  pgsql_exporter:
    image: {{ .Values.param_registry_proxy_url | default("quay.io") }}/prometheuscommunity/postgres-exporter
    container_name: pgsql_exporter
    ports:
      - "9187:9187"
    environment:
      DATA_SOURCE_NAME: "postgresql://{{ param_db_pgsql_username }}:{{ param_db_pgsql_password }}@{{ param_db_pgsql_host }}:{{ param_db_pgsql_port }}/postgres?sslmode=disable"
    restart: always
    user: root
networks:
  default:
    external:
      name: local
