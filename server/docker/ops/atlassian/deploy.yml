version: '3.9'

services:
  jira:
    image: ${param_registry_url}/${param_registry_dir}/jira
    container_name: jira
    privileged: true
    user: root
    ports:
      - "8100:8080"
    volumes:
      - ${param_docker_data}/${param_role_name}/jira/:/var/atlassian/jira/
      - ${param_docker_data}/${param_role_name}/jira/logs/:/opt/atlassian/jira/logs/
    environment:
      TZ: Asia/Shanghai
      CATALINA_OPTS: "-Xmx2G"
    restart: always

  confluence:
    image: ${param_registry_url}/${param_registry_dir}/confluence
    container_name: confluence
    privileged: true
    user: root
    ports:
      - "8101:8090"
    volumes:
      - ${param_docker_data}/${param_role_name}/confluence/:/var/atlassian/confluence/
      - ${param_docker_data}/${param_role_name}/confluence/logs/:/opt/atlassian/confluence/logs/
    environment:
      TZ: Asia/Shanghai
      CATALINA_OPTS: "-Xmx2G"
    restart: always


networks:
  default:
    external:
      name: local
