version: "3.9"

services:

  jenkins-agent:
    image: jenkins/ssh-agent:jdk11
    pull_policy: always
    container_name: jenkins-agent
    privileged: true
    user: root
    ports:
      - "5022:22"
    volumes:
      - {{ param_docker_data }}/{{ param_role_name }}/data/agent/:/home/jenkins/agent/
      - {{ param_docker_data }}/{{ param_role_name }}/data/.jenkins/:/home/jenkins/.jenkins/
      - {{ param_docker_data }}/{{ param_role_name }}/conf/:/conf/
      - /run/:/run/
      - /var/run/:/var/run/
      - /tmp/:/tmp/
    environment:
      JENKINS_AGENT_SSH_PUBKEY: 
    restart: always