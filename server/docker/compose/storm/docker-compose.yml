version: '3.7'

services:

  nimbus:
    image: storm
    container_name: nimbus
    privileged: true
    user: root
    ports:
      - 6627:6627
    command: storm nimbus
    volumes:
      - ${GLOBAL_VOLUMES_DIR}/storm/logs:/logs/
      - ${GLOBAL_VOLUMES_DIR}/storm/data:/data/
    depends_on:
      - zookeeper
    links:
      - zookeeper
    restart: always

  supervisor:
    image: storm
    container_name: supervisor
    privileged: true
    user: root
    command: storm supervisor
    depends_on:
      - nimbus
      - zookeeper
    links:
      - nimbus
      - zookeeper
    restart: always
  ui:
    image: storm
    container_name: stormui
    privileged: true
    user: root
    ports:
      - 8089:8080
    command: storm ui
    depends_on:
      - nimbus
      - zookeeper
    links:
      - nimbus
      - zookeeper
    restart: always
networks:
  default:
    external:
      name: local_default
