- hosts: nodes
  remote_user: root
  vars:
    remote_script: "/{{ansible_user_id}}/{{script_name}}"
    option_name: "k8s"
  tasks:
    - name: copy script
      copy:
        src: "{{item.src}}"
        dest: "{{item.dest}}"
      with_items:
        - { src: "{{script_path}}/{{option_name}}", dest: "{{remote_script}}" }
    - name: install
      shell: bash {{remote_script}}/{{option_name}}/{{option_name}}.sh

    - name: join cluser
      shell: kubeadm join 192.168.2.25:6443 --token 08cdfn.aj4jbq5k6iqg5ux5 --discovery-token-ca-cert-hash sha256:6f045961de9ef815e7f6cf2a27b56f181d38851f8026aec2832d341b7f66c263