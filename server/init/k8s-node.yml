- name: k8s-node
  hosts: node
  remote_user: bruce
  vars_files:
    - "vars/main.yml"
  vars:
    param_k8s_role: node
  roles:
    - k8s

#- hosts: nodes
#  remote_user: root
#  vars:
#    remote_script: "/{{ansible_user_id}}/{{script_name}}"
#    option_name: "k8s"
#  tasks:
#    - name: copy script
#      copy:
#        src: "{{item.src}}"
#        dest: "{{item.dest}}"
#      with_items:
#        - { src: "{{script_path}}/{{option_name}}", dest: "{{remote_script}}" }
#    - name: install
#      shell: bash {{remote_script}}/{{option_name}}/{{option_name}}.sh
#
#    - name: join cluser
#      shell: kubeadm join 192.168.2.21:6443 --token 3qan8a.7ovy3iufer9a04g0 --discovery-token-ca-cert-hash sha256:8316bcb163f902477fc8d3d18458f8e994d711c4fd895169817bc16da0061964