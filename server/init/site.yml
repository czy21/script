- name: os
  hosts: all
  remote_user: root
  vars_files:
    - "vars/main.yml"
  vars:
    param_role_name: os
  pre_tasks:
    - include_tasks: roles/common/tasks/copy-template.yml
  roles:
    - '{{ param_role_name }}'
  post_tasks:
    - include_tasks: roles/common/tasks/cleanup.yml
  tags:
    - '{{ param_role_name }}'

- name: docker
  hosts: all
  remote_user: bruce
  vars_files:
    - "vars/main.yml"
  vars:
    param_role_name: docker
  pre_tasks:
    - include_tasks: roles/common/tasks/copy-template.yml
  roles:
    - '{{ param_role_name }}'
  post_tasks:
    - include_tasks: roles/common/tasks/cleanup.yml
  tags:
    - '{{ param_role_name }}'

- name: hosts
  hosts: all
  remote_user: bruce
  vars_files:
    - "vars/main.yml"
  vars:
    param_role_name: hosts
  pre_tasks:
    - include_tasks: roles/common/tasks/copy-template.yml
  roles:
    - '{{ param_role_name }}'
  post_tasks:
    - include_tasks: roles/common/tasks/cleanup.yml
  tags:
    - '{{ param_role_name }}'

- name: k8s-master
  hosts: master
  remote_user: bruce
  vars_files:
    - "vars/main.yml"
  vars:
    param_k8s_role: master
    param_role_name: k8s
  pre_tasks:
    - include_tasks: roles/common/tasks/copy-template.yml
  roles:
    - '{{ param_role_name }}'
  post_tasks:
    - include_tasks: roles/common/tasks/cleanup.yml
  tags:
    - '{{ param_role_name }}-{{ param_k8s_role }}'

- name: k8s-node
  hosts: node
  remote_user: bruce
  vars_files:
    - "vars/main.yml"
  vars:
    param_k8s_role: node
    param_role_name: k8s
  pre_tasks:
    - include_tasks: roles/common/tasks/copy-template.yml
  roles:
    - '{{ param_role_name }}'
  post_tasks:
    - include_tasks: roles/common/tasks/cleanup.yml
  tags:
    - '{{ param_role_name }}-{{ param_k8s_role }}'