- name: k8s
  become: yes
  import_tasks: install.yml
  tags:
    - 'k8s'

- name: hosts init
  become: yes
  shell: sudo cat {{ param_remote_role_path }}/hosts-{{ param_ansible_distribution }} > /etc/hosts
  tags:
    - 'k8s-init-host'

- name: ha init
  import_tasks: ha-init.yml
  tags:
    - 'k8s-init-ha'

- name: etcd init cert
  import_tasks: etcd-init-cert.yml
  tags:
    - 'k8s-init-etcd-cert'

- name: etcd init
  import_tasks: etcd-init.yml
  tags:
    - 'k8s-init-etcd'

- name: kubeadm init
  import_tasks: kube-init.yml
  tags:
    - 'k8s-init-kube'

- name: kubeadm join
  import_tasks: kube-join.yml
  tags:
    - 'k8s-join'