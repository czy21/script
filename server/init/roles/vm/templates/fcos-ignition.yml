variant: fcos
version: 1.5.0
passwd:
  users:
    - name: {{ param_user_ops }}
      ssh_authorized_keys:
        - {{ param_user_ops_ssh_public_key }}
      groups:
        - wheel
        - docker
storage:
  files:
    - path: /etc/sudoers.d/99-custom
      contents:
        inline: |
          %wheel ALL=(ALL:ALL) NOPASSWD:ALL
    - path: /etc/yum.repos.d/fedora.repo
      mode: 0644
      overwrite: true
      contents:
        inline: |
          [fedora] 
          name=Fedora $releasever - $basearch
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/releases/$releasever/Everything/$basearch/os/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-$releasever&arch=$basearch 
          enabled=1 
          metadata_expire=7d 
          gpgcheck=1 
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
          
          [fedora-debuginfo] 
          name=Fedora $releasever - $basearch - Debug
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/releases/$releasever/Everything/$basearch/debug/tree/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-debug-$releasever&arch=$basearch 
          enabled=0 
          metadata_expire=7d 
          gpgcheck=1
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
          
          [fedora-source] 
          name=Fedora $releasever - Source
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/releases/$releasever/Everything/source/tree/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-source-$releasever&arch=$basearch 
          enabled=0 
          metadata_expire=7d 
          gpgcheck=1 
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch

    - path: /etc/yum.repos.d/fedora-updates.repo
      mode: 0644
      overwrite: true
      contents:
        inline: |
          [updates]
          name=Fedora $releasever - $basearch - Updates
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/updates/$releasever/Everything/$basearch/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-f$releasever&arch=$basearch 
          enabled=1 
          gpgcheck=1 
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
          
          [updates-debuginfo] 
          name=Fedora $releasever - $basearch - Updates - Debug
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/updates/$releasever/Everything/$basearch/debug/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-debug-f$releasever&arch=$basearch 
          enabled=0 
          gpgcheck=1 
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
          
          [updates-source] 
          name=Fedora $releasever - Updates Source
          #failovermethod=priority 
          baseurl=http://{{ param_mirror_yum }}/fedora/updates/$releasever/Everything/source/tree/ 
          #mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=updates-released-source-f$releasever&arch=$basearch 
          enabled=0 
          gpgcheck=1 
          gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearch
          
    - path: /etc/yum.repos.d/kubernetes.repo
      mode: 0644
      overwrite: true
      contents:
        inline: |
          [kubernetes]
          name=Kubernetes
          baseurl=http://{{ param_mirror_k8s }}/core:/stable:/v{{ param_k8s_minor_version }}/rpm/
          enabled=1
          gpgcheck=0
          gpgkey=http://{{ param_mirror_k8s }}/core:/stable:/v{{ param_k8s_minor_version }}/rpm/repodata/repomd.xml.key