- name: k8s
  become: yes
  import_tasks: install.yml
  tags:
    - '{{ param_role_name }}'

- name: hosts init
  become: yes
  shell: sudo cat {{ param_remote_role_path }}/hosts-{{ ansible_distribution | lower}} > /etc/hosts
  tags:
    - 'k8s-init-etcd'
    - 'k8s-init-kube'

- name: etcd init cert
  import_tasks: init-etcd-cert.yml
  tags:
    - 'k8s-init-etcd-cert'

- name: etcd init
  import_tasks: init-etcd.yml
  tags:
    - 'k8s-init-etcd'

- name: kubeadm init
  import_tasks: init-kube.yml
  tags:
    - 'k8s-init-kube'